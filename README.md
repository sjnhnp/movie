# X - çº¯ç²¹çš„åœ¨çº¿æ’­æ”¾å™¨

> * **é‡‡ç”¨çš„æ’­æ”¾å™¨**: [**Vidstack Player**](https://github.com/vidstack/player) 

> * **vidstack playerè€UI**: [**è€ç•Œé¢é£æ ¼**](https://github.com/sjnhnp/movie/tree/main-bk-oldUI) 

> é‡‡ç”¨dplayer[for-dplayer](https://github.com/sjnhnp/movie/tree/for-dplayer)(ä¸æ¨è)

## ğŸš€ ç‰¹åˆ«çš„

### é¦–é¡µ (Homepage)

* **ã€ç»¼è‰ºèŠ‚ç›®ã€‘**: é€‰é›†æŒ‰é’®æ–‡æœ¬ä¸ºæ•°æ®æºè‡ªèº«é¢˜ç›®ï¼Œæ¯”å¦‚`20250707(ç¬¬1æœŸ)`ï¼Œä¸å†æ˜¯1234Â·Â·Â·
* **å†å²è®°å½•**:
    * **è§‚çœ‹å†å²**: ç‹¬ç«‹ä¿å­˜æ¯ä¸€é›†çš„è§‚çœ‹è®°å½•
    * **æœç´¢å†å²**: ç”±â€œè±†ç“£çƒ­é—¨â€äº§ç”Ÿçš„æœç´¢ä¸ä¼šè®¡å…¥ä¸ªäººæœç´¢å†å²ã€‚
* **è®¾ç½®é¢æ¿**:
    * **åˆ†ç‰‡å¹¿å‘Šè¿‡æ»¤**: å¦‚æœå¼€å¯åæœ‰äº›æ•°æ®æºä¼šå¡ä½ï¼Œè¯·å…³é—­ã€‚
    * **æ’­æ”¾é¢„åŠ è½½**ï¼šè‡ªå®šä¹‰é¢„åŠ è½½é›†æ•°+å¼€å…³ã€‚
* **è§†é¢‘ç®€ä»‹**: å‡†ç¡®ä»æ•°æ®æºè·å–
    
### æ’­æ”¾é¡µ (Player Page)
> ** ä»¥ä¸Šè¯·çŸ¥æ‚‰ ** ï¼šmac windows Tablet iPad ios android safari chrome firefox 
>> - æ’­æ”¾å™¨æ§åˆ¶æ¡åŠŸèƒ½æŒ‰é’®ï¼šã€éå…¨å±+å…¨å±ä¸‹ï¼Œæˆ–éƒ½ä¼šç¨æœ‰ä¸åŒã€‘

* **æ— ç¼çº¿è·¯åˆ‡æ¢**: è·¨çº¿è·¯å…±äº«æ‰€æœ‰æ’­æ”¾è¿›åº¦+ç›¸åŒå‰§é›†å‘½åä¸åŒçš„åˆ‡æ¢çº¿è·¯èšåˆï¼Œæ¯”å¦‚æ¸¯å‰§/ç¾å‰§
* **è®°ä½è¿›åº¦**: ç‹¬ç«‹äºè§‚çœ‹å†å²ï¼Œå¯è®°ä½æ¯ä¸€é›†çš„å…·ä½“æ’­æ”¾è¿›åº¦
* **æ’­æ”¾é¢„åŠ è½½**: å¯ç”¨åä¼šè‡ªåŠ¨é¢„åŠ è½½
* **è·³è¿‡ç‰‡å¤´/ç‰‡å°¾**: ç§’ã€‚
* **é”å±åŠŸèƒ½**: é”å®šå±å¹•åï¼Œä»…ä¿ç•™æ’­æ”¾ç”»é¢åŒºåŸŸçš„æ’­æ”¾/æš‚åœã€å³ä¸Šè§’å…¨å±ã€é”å±æŒ‰é’®å¯æ“ä½œã€‚
* **å•é›†éšè—**
* **æŠ•å±+ç”»ä¸­ç”»**: æœ‰äº›æµè§ˆå™¨æŒ‰é’®åœ¨å…¨å±ä¸‹æ‰ä¼šå‡ºç°ã€‚
* **å…¨å±€å¿«æ·é”®**: åœ¨æ’­æ”¾é¡µä»»æ„ä½ç½®å‡å¯ä½¿ç”¨é”®ç›˜å¿«æ·é”®æ§åˆ¶æ’­æ”¾ã€‚

### åç«¯/æ¶æ„ (Backend/Architecture)

* **å¯†ç ä¿æŠ¤**:
    * æ”¯æŒä¸ºæ•´ä¸ªç½‘ç«™è®¾ç½®è®¿é—®å¯†ç ã€‚
    * æ”¯æŒä¸ºé¦–é¡µçš„â€œè®¾ç½®â€æŒ‰é’®å•ç‹¬è®¾ç½®å¯†ç ã€‚

## éƒ¨ç½²æŒ‡å— (Deployment)

å¯ä¸€é”®éƒ¨ç½²äº Cloudflare Pages/Vercelã€‚åŸºç¡€éƒ¨ç½²æµç¨‹è¯·å‚è€ƒ [**Libretv**](https://github.com/LibreSpark/LibreTV)ã€‚

### å¯é€‰ï¼šç¯å¢ƒå˜é‡ (Environment Variables)

1.  **KV Namespace Binding**
    * **å˜é‡åç§° (Variable name):** `LIBRETV_PROXY_KV`
    * **KV å‘½åç©ºé—´ (KV namespace):** (é€‰æ‹©æ‚¨ä¸ºæ­¤é¡¹ç›®åˆ›å»ºçš„KV)
2.  **ç¯å¢ƒå˜é‡ (Environment Variables)**
    * **å˜é‡åç§° (Variable name):** `PASSWORD`
        * **å€¼ (Value):** ç”¨äºè®¾ç½®ç½‘ç«™çš„å…¨å±€è®¿é—®å¯†ç ã€‚
    * **å˜é‡åç§° (Variable name):** `SETTINGS_PASSWORD`
        * **å€¼ (Value):** ç”¨äºä¸ºé¦–é¡µçš„â€œè®¾ç½®â€æŒ‰é’®å•ç‹¬è®¾ç½®å¯†ç ã€‚

### dockerå®‰è£…æ–¹å¼ï¼Œå¯†ç å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦æ˜¯å¦ä¿ç•™

#### Docker
```
docker run -d \
  -p 8080:8080 \
  -e PASSWORD="your-secret-password" \
  -e SETTINGS_PASSWORD="your-settings-password" \
  --restart unless-stopped \
  --name movie \
  ghcr.io/sjnhnp/movie:latest
```

#### Docker Compose
`docker-compose.yml` æ–‡ä»¶ï¼š
```
services:
  movie:
    build: .
    image: ghcr.io/sjnhnp/movie:latest
    ports:
      - "8080:8080"
    environment:
      - PORT=8080
      - PASSWORD=your-secret-password
      - SETTINGS_PASSWORD=your-settings-password
    restart: unless-stopped
```

### forkä¹‹åè‡ªåŠ¨åŒæ­¥æœ¬é¡¹ç›®

å¿…é¡»æ‰‹åŠ¨å»è‡ªå·±çš„ä»“åº“é‡Œå¯ç”¨ Actionsä¹‹åï¼Œæ‰ä¼šæŒ‰ç…§é¢„è®¾çš„æ—¶é—´ï¼ˆæ¯å¤©å‡Œæ™¨4ç‚¹ï¼‰è‡ªåŠ¨åŒæ­¥æ›´æ–°ã€‚

## é…ç½®ä¿®æ”¹

æ‚¨å¯ä»¥é€šè¿‡ä¿®æ”¹ä»¥ä¸‹JSæ–‡ä»¶æ¥è¿›è¡Œä¸ªæ€§åŒ–é…ç½®ï¼š

* **`js/config.js`**
    * `DEFAULTS`:
        * `enablePreloading`: æ’­æ”¾é¢„åŠ è½½åŠŸèƒ½çš„é»˜è®¤å¼€å…³çŠ¶æ€ã€‚
        * `preloadCount`: é»˜è®¤é¢„åŠ è½½çš„é›†æ•°ã€‚
    * `DEFAULT_SELECTED_APIS`: è®¾ç½®é¦–æ¬¡è®¿é—®æ—¶é»˜è®¤é€‰ä¸­çš„æ•°æ®æºã€‚
    * `PLAYER_CONFIG.adFilteringEnabled`: åˆ†ç‰‡å¹¿å‘Šè¿‡æ»¤åŠŸèƒ½çš„é»˜è®¤å¼€å…³çŠ¶æ€ã€‚

* **`js/douban.js`**
    * è¦ä¿®æ”¹è±†ç“£çƒ­é—¨æ¨èåŠŸèƒ½çš„é»˜è®¤å¼€å…³çŠ¶æ€ï¼Œè¯·æ‰¾åˆ°ä»¥ä¸‹ä»£ç è¡Œï¼Œå¹¶å°† `false` ä¿®æ”¹ä¸º `true`ã€‚
      ```javascript
      // å°†ä¸‹é¢ä¸¤è¡Œçš„ false ä¿®æ”¹ä¸º true
      const isEnabled = utils.storage.get(CONFIG.STORAGE_KEYS.ENABLED, false) === true;
      if (localStorage.getItem(CONFIG.STORAGE_KEYS.ENABLED) === null) {
        utils.storage.set(CONFIG.STORAGE_KEYS.ENABLED, false);
      }
      ```

## è®¸å¯è¯ (License)

æœ¬é¡¹ç›®éµå¾ªä¸[**Libretv**](https://github.com/LibreSpark/LibreTV)ç›¸åŒçš„è®¸å¯è¯ã€‚

## æ„Ÿè°¢
- [**Libretv**](https://github.com/LibreSpark/LibreTV)
- [**Vidstack Player**](https://github.com/vidstack/player) 