# X - çº¯ç²¹çš„åœ¨çº¿æ’­æ”¾å™¨

> * **é‡‡ç”¨çš„æ’­æ”¾å™¨**: [**Vidstack Player**](https://github.com/vidstack/player) 

> é‡‡ç”¨dplayerç‰ˆæœ¬è¯·ç§»æ­¥åˆ°åˆ†æ”¯[for-dplayer](https://github.com/sjnhnp/movie/tree/for-dplayer)

## ğŸš€ ç‰¹åˆ«çš„

### é¦–é¡µ (Homepage)
* **é€‰é›†æŒ‰é’®æ–‡æœ¬ï¼Œå…¶å®ƒé»˜è®¤ç´¢å¼•**:
    * **ç»¼è‰ºèŠ‚ç›®**: é€‰é›†æŒ‰é’®æ–‡æœ¬ä¸ºåŸå§‹æœŸæ•°åç§°ï¼Œæ¯”å¦‚`20250707(ç¬¬1æœŸ)`ï¼Œä¸å†æ˜¯`1234Â·Â·Â·`
    * **éç»¼è‰ºçš„éçº¯æ•°å­—**: ä¼˜å…ˆä½¿ç”¨åŸå§‹åç§°ï¼Œæ¯”å¦‚`HD/TC/é«˜æ¸…`
* **æœç´¢ç»“æœ**: 
    * **æ— æ„Ÿæ’åº**: å•çº¯æ ¹æ®ä¸‹è½½é€Ÿåº¦ï¼Œæœ€å¿«-æœ€æ…¢-N/Aï¼Œ
    * **è‡ªå®šä¹‰ç¼“å­˜**: å¯è‡ªå®šä¹‰ä¿å­˜å¤©æ•°
        - ç¼“å­˜æ•ˆæœŸå†…ï¼ŒåŒå…³é”®å­—æœç´¢`ç§’å¼€`ç»“æœ
        - æ›´æ”¹ä¸åŒæ•°æ®æºï¼Œå¯å¼ºåˆ¶æ›´æ–°ç¼“å­˜
    * **ç”»è´¨å’Œé€Ÿåº¦**: 
        - åå°è‡ªåŠ¨æ›´æ–°ï¼Œè‡ªåŠ¨æ›´æ–°ç”»è´¨æ ‡ç­¾ï¼Œè‡ªåŠ¨æ’åºï¼Œä¸é˜»å¡UIä½“éªŒ
        - è‹¥ç”»è´¨æ ‡ç­¾æ˜¾ç¤º`æœªçŸ¥`ï¼Œå¯æ‰‹åŠ¨ç‚¹å‡»`æœªçŸ¥`é‡æ–°æ£€æµ‹ï¼Œå­˜å…¥ç¼“å­˜
        - æ˜¾ç¤ºä½ç½®ï¼šæœç´¢ç»“æœå¡ç‰‡ã€é›†æ•°å¼¹çª—ã€‚é€Ÿåº¦åªåœ¨å¼¹çª—ã€‚
* **å†å²è®°å½•**:
    * **è§‚çœ‹å†å²**: ç‹¬ç«‹ä¿å­˜æ¯ä¸€é›†çš„è§‚çœ‹è®°å½•
    * **æœç´¢å†å²**: ç”±â€œè±†ç“£çƒ­é—¨â€äº§ç”Ÿçš„æœç´¢ä¸ä¼šè®¡å…¥ä¸ªäººæœç´¢å†å²ã€‚
* **è®¾ç½®é¢æ¿**:
    * **åˆ†ç‰‡å¹¿å‘Šè¿‡æ»¤**: å¦‚æœå¼€å¯åæœ‰äº›æ•°æ®æºä¼šå¡ä½ï¼Œè¯·å…³é—­ã€‚
    * **æ’­æ”¾é¢„åŠ è½½**ï¼šè‡ªå®šä¹‰é¢„åŠ è½½é›†æ•°+å¼€å…³ã€‚
    * **ç”»è´¨é€Ÿåº¦æ£€æµ‹**ï¼šå¼€å…³
* **è§†é¢‘ç®€ä»‹**: å‡†ç¡®ä»æ•°æ®æºè·å–
    
### æ’­æ”¾é¡µ (Player Page)
> mac windows ios android safari chrome firefox 
>> - æ’­æ”¾å™¨æ§åˆ¶æ¡åŠŸèƒ½æŒ‰é’®ï¼šéå…¨å±+å…¨å±ä¸‹ï¼Œæˆ–éƒ½ä¼šç¨æœ‰ä¸åŒ
>> - æ“ä½œæç¤ºæ¶ˆæ¯æˆ–ä¹Ÿæœ‰å·®å¼‚
>> - ä»¥ä¸Šè¯·çŸ¥æ‚‰

* **è§‚çœ‹å†å²+æœç´¢**: ä¸é¦–é¡µä¸€è‡´
* **æ— ç¼çº¿è·¯åˆ‡æ¢**: 
    - è·¨çº¿è·¯å…±äº«æ‰€æœ‰æ’­æ”¾è¿›åº¦+ç›¸åŒå‰§é›†å‘½åä¸åŒçš„åˆ‡æ¢çº¿è·¯èšåˆï¼Œæ¯”å¦‚æ¸¯å‰§/ç¾å‰§
    - çº¿è·¯æ˜¾ç¤ºæ›´æ–°çŠ¶æ€ï¼Œæ¯”å¦‚`å·²å®Œç»“`
* **è®°ä½è¿›åº¦**: ç‹¬ç«‹äºè§‚çœ‹å†å²ï¼Œè®°ä½æ¯é›†çš„æ’­æ”¾è¿›åº¦
* **æ’­æ”¾é¢„åŠ è½½**: å¯ç”¨åä¼šè‡ªåŠ¨é¢„åŠ è½½
* **å»å¹¿å‘Š+é¢„åŠ è½½**: å®æ—¶ç”Ÿæ•ˆ
* **è·³è¿‡ç‰‡å¤´/ç‰‡å°¾**: ç§’ã€‚
* **é”å±åŠŸèƒ½**: é”å®šå±å¹•åï¼Œä»…ä¿ç•™æ’­æ”¾ç”»é¢åŒºåŸŸçš„æ’­æ”¾/æš‚åœã€å³ä¸Šè§’å…¨å±ã€é”å±æŒ‰é’®å¯æ“ä½œã€‚
* **å•é›†éšè—**
* **æŠ•å±+ç”»ä¸­ç”»**: æœ‰äº›æµè§ˆå™¨æŒ‰é’®åœ¨å…¨å±ä¸‹æ‰ä¼šå‡ºç°ã€‚
* **å…¨å±€å¿«æ·é”®**: åœ¨æ’­æ”¾é¡µä»»æ„ä½ç½®å‡å¯ä½¿ç”¨é”®ç›˜å¿«æ·é”®æ§åˆ¶æ’­æ”¾ï¼Œéœ€è¦ç‰¹åˆ«è¯´æ˜å¦‚ä¸‹
    - wï¼šè¿›å…¥/é€€å‡ºç½‘é¡µå…¨å±
    - escï¼šé€€å‡ºç½‘é¡µå…¨å±/å…¨å±
    - åŒå‡»/åŒæŒ‡å•å‡»ï¼šå·¦å³/å¿«è¿›é€€ã€ä¸­å¤®åŒºåŸŸ/å…¨å±
    - åŒæŒ‡ç¼©æ”¾ç½‘é¡µï¼ŒåŒ…æ‹¬æ’­æ”¾å™¨åŒºåŸŸ
    - fï¼šè¿›å…¥/é€€å‡ºå…¨å±
    - mï¼šé™éŸ³
    - å·¦å³æ»‘åŠ¨ï¼šè¿›åº¦æ¡
    - alt+å·¦å³ï¼šä¸Š/ä¸‹é›†
  
### åç«¯/æ¶æ„ (Backend/Architecture)

* **å¯†ç ä¿æŠ¤**:
    * æ”¯æŒä¸ºæ•´ä¸ªç½‘ç«™è®¾ç½®è®¿é—®å¯†ç ã€‚
    * æ”¯æŒä¸ºé¦–é¡µçš„â€œè®¾ç½®â€æŒ‰é’®å•ç‹¬è®¾ç½®å¯†ç ã€‚

## éƒ¨ç½²æŒ‡å— (Deployment)

å¯ä¸€é”®éƒ¨ç½²äº Cloudflare Pages/Vercelã€‚åŸºç¡€éƒ¨ç½²æµç¨‹è¯·å‚è€ƒ [**Libretv**](https://github.com/LibreSpark/LibreTV)ã€‚

### å¯é€‰ï¼šç¯å¢ƒå˜é‡ (Environment Variables)

1.  **KV Namespace Binding**
    * **å˜é‡åç§° (Variable name):** `LIBRETV_PROXY_KV`
    * **KV å‘½åç©ºé—´ (KV namespace):** (é€‰æ‹©æ‚¨ä¸ºæ­¤é¡¹ç›®åˆ›å»ºçš„KV)
2.  **ç¯å¢ƒå˜é‡ (Environment Variables)**
    * **å˜é‡åç§° (Variable name):** `PASSWORD`
        * **å€¼ (Value):** ç”¨äºè®¾ç½®ç½‘ç«™çš„å…¨å±€è®¿é—®å¯†ç ã€‚
    * **å˜é‡åç§° (Variable name):** `SETTINGS_PASSWORD`
        * **å€¼ (Value):** ç”¨äºä¸ºé¦–é¡µçš„â€œè®¾ç½®â€æŒ‰é’®å•ç‹¬è®¾ç½®å¯†ç ã€‚

### dockerå®‰è£…æ–¹å¼ï¼Œå¯†ç å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦æ˜¯å¦ä¿ç•™

#### Docker
```
docker run -d \
  -p 8080:8080 \
  -e PASSWORD="your-secret-password" \
  -e SETTINGS_PASSWORD="your-settings-password" \
  --restart unless-stopped \
  --name movie \
  ghcr.io/sjnhnp/movie:latest
```

#### Docker Compose
`docker-compose.yml` æ–‡ä»¶ï¼š
```
services:
  movie:
    build: .
    image: ghcr.io/sjnhnp/movie:latest
    ports:
      - "8080:8080"
    environment:
      - PORT=8080
      - PASSWORD=your-secret-password
      - SETTINGS_PASSWORD=your-settings-password
    restart: unless-stopped
```

### forkä¹‹åè‡ªåŠ¨åŒæ­¥æœ¬é¡¹ç›®

å¿…é¡»æ‰‹åŠ¨å»è‡ªå·±çš„ä»“åº“é‡Œå¯ç”¨ Actionsä¹‹åï¼Œæ‰ä¼šæŒ‰ç…§é¢„è®¾çš„æ—¶é—´ï¼ˆæ¯å¤©å‡Œæ™¨4ç‚¹ï¼‰è‡ªåŠ¨åŒæ­¥æ›´æ–°ã€‚

## é…ç½®ä¿®æ”¹

æ‚¨å¯ä»¥é€šè¿‡ä¿®æ”¹ä»¥ä¸‹JSæ–‡ä»¶æ¥è¿›è¡Œä¸ªæ€§åŒ–é…ç½®ï¼š

* **`js/config.js`**
    * `const DEFAULT_SELECTED_APIS`: è®¾ç½®é¦–æ¬¡è®¿é—®æ—¶é»˜è®¤é€‰ä¸­çš„æ•°æ®æºã€‚
    * `adFilteringEnabled: getBoolConfig('adFilteringEnabled', true)`: åˆ†ç‰‡å¹¿å‘Šè¿‡æ»¤åŠŸèƒ½çš„é»˜è®¤å¼€å…³çŠ¶æ€ã€‚
    * `speedDetectionEnabled: getBoolConfig('speedDetectionEnabled', true)`: ç”»è´¨å’Œé€Ÿåº¦æ£€æµ‹åŠŸèƒ½çš„é»˜è®¤å¼€å…³çŠ¶æ€
    * `const MAX_HISTORY_ITEMS`ï¼šæœç´¢å†å²æ ‡ç­¾æœ€å¤§æ•°ï¼Œé»˜è®¤5


    ```
    // é¢„åŠ è½½é›†æ•°å¼€å…³
    const DEFAULTS = {
        enablePreloading: true, // é¢„åŠ è½½ 
        preloadCount: 2,       // é¢„åŠ è½½é›†æ•° 
        debugMode: false      // è°ƒè¯•æ¨¡å¼ 
    };
    ```

    ```
    // æœç´¢ç»“æœç¼“å­˜
    const SEARCH_CACHE_CONFIG = {
        expireTime: 15 * 24 * 60 * 60 * 1000, // é»˜è®¤15å¤©æ•ˆæœŸ
        enabled: true // æ˜¯å¦å¯ç”¨æœç´¢ç¼“å­˜
    };
    ```

* **`js/douban.js`**
    * è¦ä¿®æ”¹è±†ç“£çƒ­é—¨æ¨èåŠŸèƒ½çš„é»˜è®¤å¼€å…³çŠ¶æ€ï¼Œè¯·æ‰¾åˆ°ä»¥ä¸‹ä»£ç è¡Œï¼Œå¹¶å°† `false` ä¿®æ”¹ä¸º `true`ã€‚
      ```javascript
      // å°†ä¸‹é¢ä¸¤è¡Œçš„ false ä¿®æ”¹ä¸º true
      const isEnabled = utils.storage.get(CONFIG.STORAGE_KEYS.ENABLED, false) === true;
      if (localStorage.getItem(CONFIG.STORAGE_KEYS.ENABLED) === null) {
        utils.storage.set(CONFIG.STORAGE_KEYS.ENABLED, false);
      }
      ```

* **`index.html`**

    ```
        <!-- æ¯”å¦‚FacebookæŠ“å–çš„é¢„è§ˆ -->
    <meta property="og:title" content="X" />
    <meta property="og:description" content="TV Aggregation" />
    <meta property="og:image" content="https://yourwebsite.com/images/tv1.png" />
    <meta property="og:url" content="https://yourwebsite.com" />
    <meta property="og:type" content="website" />
     
    ```

## è®¸å¯è¯ (License)

æœ¬é¡¹ç›®éµå¾ªä¸[**Libretv**](https://github.com/LibreSpark/LibreTV)é¡¹ç›®ç›¸åŒçš„è®¸å¯è¯ã€‚

## æ„Ÿè°¢
- [**Libretv**](https://github.com/LibreSpark/LibreTV)
- [**Vidstack Player**](https://github.com/vidstack/player) 